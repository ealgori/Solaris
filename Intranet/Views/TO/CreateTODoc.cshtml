@using Intranet.Models
@model Intranet.Models.TOViewModel
@{
    ViewBag.Title = "TO Creation";
    Layout = "~/Views/Shared/_LayoutWide.cshtml";
}
<script src="@Url.Content("~/Scripts/Site/TOCreate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DynamicRowList/jquery.mvc-template-row.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/stickyTableHeaders.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/iphone-style-checkboxes.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/autoBind.js")" type="text/javascript"></script>
<link href='@Url.Content("~/Content/style.css")' rel="stylesheet" />
<div class="content-loader content-back-white">
    <img class="loading-img" src='@Url.Content("~/Content/Images/MetroLoader.gif")' alt=" " />
</div>
@using (Ajax.BeginForm("CreateTODoc", "TO", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "Message", LoadingElementId = "to-loading", OnSuccess = "FormOnComplete", OnComplete = "Enablebtn", OnBegin = "Disablebtn" , OnFailure="alert('Ошибка. Пожалуйста сообщите администратору')"}))
{
    <div class="span row">
        <div class="row">
        </div>
        <div class="row">
            <div class="span6">
                <h5>TO <i class="icon-asterisk" title="Утвержденнные ТО, с неутвержденной стоимостью."></i>
                </h5>
                @Html.EditorFor(m => m.TO)
                @Html.ValidationMessageFor(m => m.TO)
            </div>
            <div class="span3">
                <h5> @Html.LabelFor(l => l.Subcontractor)
                </h5>
                @Html.TextBoxFor(m => m.Subcontractor, new { disabled = "disabled", @readonly = "readonly" })
             
            </div>

             <div class="span1">
                <h5> @Html.LabelFor(l => l.WOVAT)
                </h5>
               
                @Html.CheckBoxFor(c => c.WOVAT, new { @class = "extraLarge",@readonly = "readonly" ,disabled = "disabled" })
            </div>
            <div class="span3">
                <h5>
                   <label> Автозаполнение</label>


                </h5>
                   <span><input id="aps" type="checkbox" name="second" title="Автоматическое заполнение однотипных позиций"/></span>
            </div>

            @*  <div class="span3">
                <h5>
                    Total Price
                </h5>
                @Html.EditorFor(m => m.TotalPrice)
            </div>*@
        </div>
        <div class="row">
             


              <div class="span3">
                <h5>
                    @Html.LabelFor(l => l.Region)
                </h5>
                @Html.TextBoxFor(m => m.Region, new { disabled = "disabled", @readonly = "readonly",style="width:50px" })
                @Html.ValidationMessageFor(m => m.Region)
            </div>
            <div class="span6">
                <h5>
                    @Html.LabelFor(l => l.Brunch)
                </h5>
                @Html.TextBoxFor(m => m.Brunch, new { disabled = "disabled", @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.Brunch)
            </div>
        </div>

        <div class="row">
          
         
            <div class="span3">
                <h5>
                    @Html.LabelFor(l => l.Activity)
                </h5>
                @Html.TextBoxFor(m => m.Activity, new { disabled = "disabled", @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.Activity)
            </div>
            <div class="span3">
                <h5>
                    @Html.LabelFor(l => l.Type)
                </h5>
                @Html.TextBoxFor(m => m.Type, new { disabled = "disabled", @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.Type)
            </div>
  
              <div class="span3">
                <h5>
                    @Html.LabelFor(l => l.TotalPrice)
                </h5>
                @Html.TextBoxFor(m => m.TotalPrice, new { disabled = "disabled", @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.TotalPrice)
            </div>

             <div class="span5">
                <h5>
                    @Html.LabelFor(l => l.POIssueDate)
                </h5>
                @Html.TextBoxFor(m => m.POIssueDate, new { disabled = "disabled", @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.POIssueDate)
            </div>
        </div>

        <div class="form-controls">
            <button id="Sendbtn" type="submit" class="btn btn-default">Загрузить в СХ</button>
           <h6> <div id="to-message" style="display:none">
                
        </div></h6>
            <div id="to-loading" style="display:none">
                <img src='@Url.Content("~/Content/Images/9-1.gif")'/>
        </div>
        </div>

        
        <br />

    </div>
    <div>
    </div>
    <div class="">
        <table class="table table-bordered" id="targetTable">
            <thead class="header" style="background-color: rgb(154, 205, 50); background-position: initial initial; background-repeat: initial initial;">
            </thead>
            <tbody>
                @*   @Html.EditorFor(model => Model.Items)*@
            </tbody>
        </table>
    </div>

    <div class="">
        <table class="table table-bordered" id="materialTable">
            <thead style="background-color: rgb(154, 205, 50); background-position: initial initial; background-repeat: initial initial;">
            </thead>
            <tbody>
                @*   @Html.EditorFor(model => Model.Items)*@
            </tbody>
        </table>
    </div>
@*{<table id="mvcTemplateTable" style="display: none;">
         
    //List<TOItemViewModel> Items = Model.ToItemViewModels;
    //Items.Add(new TOItemViewModel());
        }
       Html.EditorFor(m => Items)
    </table>*@
     
}
<script type="text/javascript">
    var PositionList;
    var toListUrl = '@Url.Action("TOList", "Json")';
    var toPositionUrl = '@Url.Action("TOPositionList", "Json")';
    var toDataUrl = '@Url.Action("GetTODataById", "TO")';
    var priceListUrl = '@Url.Action("GetPriceListItemPrice", "Json")';


</script>
